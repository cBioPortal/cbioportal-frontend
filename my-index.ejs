<!DOCTYPE html>
<html class="cbioportal-frontend">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <link rel="icon" href="/images/cbioportal_icon.png"/>
    <title>cBioPortal for Cancer Genomics</title>
    <script>

        window.devContext = true;
        window.frontendConfig = {
            apiRoot: window.location.origin + '/',
            baseUrl: window.location.host
        }

        // Visible error display for mobile debugging
        window.onerror = function(msg, url, line, col, error) {
            var errorDiv = document.getElementById('mobileErrorLog');
            if (!errorDiv) {
                errorDiv = document.createElement('div');
                errorDiv.id = 'mobileErrorLog';
                errorDiv.style.cssText = 'position:fixed;bottom:0;left:0;right:0;max-height:40vh;overflow:auto;background:#ff000099;color:white;padding:10px;font-size:12px;z-index:99999;font-family:monospace;';
                document.body.appendChild(errorDiv);
            }
            errorDiv.innerHTML += '<div style="border-bottom:1px solid white;padding:5px 0;">' + msg + '<br>at ' + url + ':' + line + '</div>';
            return false;
        };
        window.addEventListener('unhandledrejection', function(e) {
            var errorDiv = document.getElementById('mobileErrorLog');
            if (!errorDiv) {
                errorDiv = document.createElement('div');
                errorDiv.id = 'mobileErrorLog';
                errorDiv.style.cssText = 'position:fixed;bottom:0;left:0;right:0;max-height:40vh;overflow:auto;background:#ff000099;color:white;padding:10px;font-size:12px;z-index:99999;font-family:monospace;';
                document.body.appendChild(errorDiv);
            }
            errorDiv.innerHTML += '<div style="border-bottom:1px solid white;padding:5px 0;">Promise: ' + (e.reason ? e.reason.message || e.reason : 'unknown') + '</div>';
        });

        /* REMOVED: This is an example of how to add custom tabs to the patient page. Enabling this will clobber localStorage.frontendConfig that is set through the browser console
        localStorage.frontendConfig = JSON.stringify(
        {
            serverConfig:{

                custom_tabs:[
                    {
                        title: 'Sync Tab',
                        id: 'customTab1',
                        location: 'PATIENT_PAGE',
                        mountCallback: `(div)=>{
                                $(div).html("tab for patient " + window.location.search.split("=").slice(-1))
                            }`,
                    },
                    {
                        title: 'Async Tab',
                        id: 'customTab2',
                        location: 'PATIENT_PAGE',
                        hideAsync: `()=>{
                                    return new Promise((resolve)=>{
                                            setTimeout(()=>{
                                                resolve(true);
                                            }, 2000);
                                    });
                                }`,
                    },
                ]
            }
        });
        */

    function renderCustomTab1(div, tab){
        $(div).append(`<div>this is the content for <strong>${tab.title}</strong></div>`);
    }


    </script>
    <script src="/reactapp/common.bundle.js"></script>

    <link href="/reactapp/prefixed-bootstrap.min.css" rel="stylesheet"></link>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet" />
</head>
<body>

<div id="reactRoot"></div>

</body>
</html>
